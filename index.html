<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Certification CCNA - Session Officielle</title>
    <style>
        :root { --primary: #0056b3; --secondary: #6c757d; --success: #28a745; --danger: #dc3545; --warning: #ffc107; --light: #f8f9fa; --dark: #343a40; }
        
        /* --- LAYOUT G√âN√âRAL --- */
        html, body { height: 100%; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: #eef2f5; color: var(--dark); user-select: none; overflow: hidden; }
        
        /* Protection Clic Droit */
        body { -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }

        .app-container { display: flex; flex-direction: column; height: 100vh; max-width: 1400px; margin: 0 auto; background: white; box-shadow: 0 0 20px rgba(0,0,0,0.1); position: relative; }

        /* --- HEADER --- */
        .header { flex: 0 0 auto; background: var(--dark); color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; z-index: 10; height: 70px; }
        .user-info-bar { font-size: 0.95rem; line-height: 1.4; }
        .timer-badge { background: var(--warning); color: var(--dark); padding: 5px 15px; border-radius: 20px; font-weight: bold; font-family: monospace; font-size: 1.4rem; min-width: 90px; text-align: center; }

        /* --- CONTENU --- */
        .main-content { flex: 1 1 auto; display: flex; overflow: hidden; position: relative; }
        .quiz-area { flex: 1; padding: 30px; overflow-y: auto; background: white; }
        .nav-palette { width: 260px; background: #f8f9fa; border-left: 1px solid #dee2e6; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; }
        
        /* --- FOOTER --- */
        .footer { flex: 0 0 auto; padding: 15px 30px; background: white; border-top: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center; z-index: 10; height: 70px; }

        /* --- QUESTIONS --- */
        .question-card { display: none; } /* Pas d'animation lourde pour √©viter les crashs sur 100 Q */
        .question-card.active { display: block; }
        .q-text { font-size: 1.25rem; font-weight: 600; margin-bottom: 20px; color: #2c3e50; line-height: 1.5; }
        .multi-hint { font-size: 0.9rem; color: var(--primary); font-style: italic; margin-left: 10px; font-weight: normal; }

        .option { display: flex; align-items: center; padding: 12px 15px; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; margin-bottom: 10px; transition: background 0.2s; background: white; }
        .option:hover { background: #f8f9fa; border-color: #ced4da; }
        .option.selected { border-color: var(--primary); background-color: #e7f1ff; font-weight: 500; }
        
        .marker { width: 20px; height: 20px; border: 2px solid #adb5bd; margin-right: 15px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .marker.radio { border-radius: 50%; }
        .marker.check { border-radius: 4px; }
        .option.selected .marker { background: var(--primary); border-color: var(--primary); color: white; }
        .option.selected .marker::after { content: '‚úî'; font-size: 12px; }

        /* --- PALETTE --- */
        .palette-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-top: 10px; }
        .p-btn { padding: 6px 0; border: 1px solid #dee2e6; background: white; text-align: center; border-radius: 4px; cursor: pointer; font-size: 0.85rem; }
        .p-btn.active { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary); font-weight: bold; }
        .p-btn.answered { background: var(--primary); color: white; border-color: var(--primary); }

        /* --- BOUTONS --- */
        .btn { padding: 10px 25px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; font-size: 1rem; }
        .btn-prev { background: #e9ecef; color: var(--dark); }
        .btn-next { background: var(--primary); color: white; }
        .btn-finish { background: var(--success); color: white; display: none; }

        /* --- OVERLAYS (LOGIN / RESULTAT) --- */
        /* CORRECTION ICI : Remplacement de justify-content: center par flex-start pour √©viter que le titre soit coup√© en haut */
        .full-screen-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding: 20px; overflow-y: auto; }
        
        .input-group { margin-bottom: 20px; text-align: left; width: 100%; max-width: 450px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 8px; color: var(--secondary); }
        .input-group input { width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        .info-box { background: #e3f2fd; border-left: 5px solid var(--primary); padding: 20px; margin: 20px 0; text-align: left; border-radius: 4px; max-width: 600px; width: 100%; }

        /* --- ANTI-TRICHE --- */
        #cheat-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(220, 53, 69, 0.98); z-index: 9999; display: none; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; }

        /* --- IMPRESSION PDF (CORRECTIF MAJEUR) --- */
        @media print {
            body, html { height: auto !important; overflow: visible !important; }
            .app-container { display: none !important; } /* Cache l'interface quiz */
            .full-screen-overlay { position: static !important; display: block !important; height: auto !important; overflow: visible !important; z-index: 1 !important; }
            #login-screen, #cheat-overlay, .no-print { display: none !important; }
            #result-screen { display: block !important; padding: 0 !important; }
            .correction-item { page-break-inside: avoid; border: 1px solid #ddd; margin-bottom: 10px; padding: 10px; }
            #correction-area { display: block !important; }
        }
    </style>
</head>
<body oncontextmenu="return false;">

<div id="cheat-overlay">
    <div style="font-size: 4rem;">‚ö†Ô∏è</div>
    <h1>ALERTE S√âCURIT√â</h1>
    <p style="font-size: 1.2rem;">Sortie de zone d√©tect√©e. (<span id="warn-count">0</span>/3)</p>
    <button class="btn" style="background: white; color: var(--danger); margin-top: 20px;" onclick="closeCheat()">Revenir √† l'examen</button>
</div>

<div class="app-container">
    
    <div class="header" id="app-header" style="display:none;">
        <div class="user-info-bar" id="user-display">
            </div>
        <div class="timer-badge" id="timer">50:00</div>
    </div>

    <div class="main-content" id="app-content" style="display:none;">
        <div class="quiz-area">
            <div id="quiz-questions"></div>
        </div>
        <div class="nav-palette">
            <h4 style="margin-top: 0; color: var(--dark);">Navigation</h4>
            <div class="palette-grid" id="palette-grid"></div>
            <div style="margin-top: 20px; font-size: 0.8rem; color: #666;">
                <span style="display:inline-block; width:10px; height:10px; background:var(--primary); margin-right:5px; border-radius:2px;"></span>R√©pondu<br>
                <span style="display:inline-block; width:10px; height:10px; border:1px solid #ccc; margin-right:5px; border-radius:2px;"></span>En attente
            </div>
        </div>
    </div>

    <div class="footer" id="app-footer" style="display:none;">
        <button class="btn btn-prev" onclick="nav(-1)">Pr√©c√©dent</button>
        <div id="q-indicator" style="font-weight: bold; color: var(--secondary);">Question 1 / 100</div>
        <div>
            <button class="btn btn-next" id="next-btn" onclick="nav(1)">Suivant</button>
            <button class="btn btn-finish" id="finish-btn" onclick="checkFinish()">TERMINER L'EXAMEN</button>
        </div>
    </div>
</div>

<div id="login-screen" class="full-screen-overlay">
    <div style="margin-top: 50px;"></div> <h1 style="color: var(--primary);">Examen Certification CCNA</h1>
    <p style="color: #666; font-size: 1.1rem;">Enseignant : <strong>Elvis TCHIMEGNI</strong></p>
    
    <div class="info-box">
        <h3>üîí Consignes de l'√©preuve</h3>
        <ul>
            <li><strong>Dur√©e :</strong> 50 minutes (Chrono strict).</li>
            <li><strong>Questions :</strong> 100 QCM (Tirage al√©atoire).</li>
            <li><strong>Validation :</strong> Note minimale de 80/100.</li>
            <li><strong>S√©curit√© :</strong> 3 sorties d'√©cran = Disqualification.</li>
        </ul>
    </div>

    <div class="input-group"><label>Nom & Pr√©nom</label><input type="text" id="name" placeholder="Ex: Aboa Luise"></div>
    <div class="input-group"><label>√âtablissement</label><input type="text" id="school" placeholder="Ex: Localhost Academy"></div>
    <div class="input-group"><label>Fili√®re</label><input type="text" id="major" placeholder="Ex: Administration Syst√®me et R√©seaux"></div>

    <div style="text-align:center; margin-top: 10px;">
        <button class="btn btn-next" style="width: 100%; max-width: 450px; font-size: 1.2rem; padding: 15px;" onclick="startExam()">LANCER L'EXAMEN</button>
        <p style="color: var(--danger); font-size: 0.9rem; margin-top: 10px; font-weight: bold;">‚ö†Ô∏è Attention : Le navigateur passera en mode Plein √âcran.</p>
    </div>
    <div style="margin-bottom: 50px;"></div>
</div>

<div id="result-screen" class="full-screen-overlay" style="display:none;">
    <h1>Rapport d'Examen CCNA</h1>
    <div id="final-decision" style="font-size: 2rem; font-weight: bold; margin: 10px 0;"></div>
    
    <div style="width: 150px; height: 150px; border-radius: 50%; border: 10px solid var(--primary); display: flex; justify-content: center; align-items: center; font-size: 2.5rem; font-weight: bold; margin: 0 auto 20px; color: var(--primary);" id="final-score">
        --/100
    </div>
    
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: left; margin: 20px 0; width: 90%; max-width: 600px;">
        <p><strong>Etudiant :</strong> <span id="res-name"></span></p>
        <p><strong>Fili√®re :</strong> <span id="res-major"></span></p>
        <p><strong>√âtablissement :</strong> <span id="res-school"></span></p>
        <p><strong>Enseignant :</strong> Elvis TCHIMEGNI</p>
        <p><strong>Incidents de s√©curit√© :</strong> <span id="res-cheats" style="color: red; font-weight: bold;">0</span> / 3</p>
        <p id="mail-status" style="font-weight:bold; color:var(--primary);">Pr√©paration de l'envoi...</p>
    </div>
    
    <button class="btn btn-primary no-print" onclick="window.print()">üñ®Ô∏è Imprimer le Rapport PDF</button>
    <div id="correction-area" style="width: 100%; max-width: 800px; margin-top: 30px; text-align: left; padding-bottom: 50px;"></div>
</div>

<div id="locked-screen" class="full-screen-overlay" style="display:none;">
    <div style="font-size: 5rem;">üîí</div>
    <h1 style="color: var(--danger);">Examen D√©j√† Soumis</h1>
    <p>Vous avez d√©j√† effectu√© et valid√© votre tentative.</p>
    <p>Le syst√®me interdit toute nouvelle soumission.</p>
    <p style="margin-top: 20px; font-weight: bold;">Enseignant : Elvis TCHIMEGNI</p>
</div>

<script>
// --- CONFIGURATION ---
const REQUIRED_Q = 100;
const PASS_SCORE = 80;
const DURATION_MIN = 50;

// --- BASE DE DONN√âES (100+ QUESTIONS UNIQUES) ---
const FULL_DB = [
    // MULTI-CHOIX
    { type: 'multi', count: 2, q: "Quels sont les deux principaux protocoles de la couche Transport du mod√®le TCP/IP ?", options: ["IP", "TCP", "HTTP", "UDP", "Ethernet"], a: [1, 3], e: "TCP (fiable) et UDP (rapide) sont les protocoles de couche 4." },
    { type: 'multi', count: 2, q: "Quels sont deux avantages majeurs de l'impl√©mentation des VLANs dans un r√©seau ?", options: ["R√©duction des domaines de diffusion", "Augmentation de la latence", "Am√©lioration de la s√©curit√©", "Suppression du routage"], a: [0, 2], e: "Les VLANs segmentent les broadcasts et isolent les groupes." },
    { type: 'multi', count: 3, q: "Quelles sont les trois plages d'adresses IP priv√©es d√©finies par la RFC 1918 ?", options: ["10.0.0.0/8", "172.16.0.0/12", "11.0.0.0/8", "192.168.0.0/16", "209.165.200.0/24"], a: [0, 1, 3], e: "10.x.x.x, 172.16-31.x.x et 192.168.x.x sont priv√©es." },
    { type: 'multi', count: 2, q: "Quels √©quipements r√©seau fonctionnent au niveau de la couche 2 (Liaison de donn√©es) ?", options: ["Switch", "Hub", "Pont (Bridge)", "R√©p√©teur"], a: [0, 2], e: "Switch et Pont utilisent les adresses MAC." },

    // CHOIX UNIQUE (REFORMUL√â)
    { q: "Quelle est la caract√©ristique fondamentale d'un r√©seau convergent ?", options: ["Il utilise uniquement la fibre optique", "Il transporte voix, vid√©o et donn√©es sur une m√™me infrastructure", "Il s√©pare physiquement le t√©l√©phone et l'informatique", "Il ne n√©cessite aucun routeur"], a: 1, e: "La convergence unifie tous les types de trafic sur un seul r√©seau." },
    { q: "Dans une architecture r√©seau, quel √©l√©ment assure la tol√©rance aux pannes ?", options: ["Le co√ªt √©lev√©", "La redondance des liens et √©quipements", "L'utilisation du Wi-Fi", "La suppression des pare-feu"], a: 1, e: "La redondance garantit la continuit√© de service." },
    { q: "Quel type de r√©seau s'√©tend sur une large zone g√©ographique (g√©r√© par un FAI) ?", options: ["LAN", "WLAN", "WAN", "PAN"], a: 2, e: "WAN = Wide Area Network." },
    { q: "Quelle couche du mod√®le OSI g√®re le routage et l'adressage IP ?", options: ["Physique", "Liaison de donn√©es", "R√©seau", "Transport"], a: 2, e: "Couche 3 : R√©seau (Paquets)." },
    { q: "Quelle est l'unit√© de donn√©es (PDU) de la couche Transport ?", options: ["Trame", "Paquet", "Segment", "Bit"], a: 2, e: "Transport = Segment." },
    { q: "Quel protocole permet de traduire les noms de domaine en adresses IP ?", options: ["DHCP", "DNS", "HTTP", "FTP"], a: 1, e: "DNS = Domain Name System." },
    { q: "Quelle commande permet de passer en mode privil√©gi√© ?", options: ["configure terminal", "enable", "login", "exit"], a: 1, e: "La commande est 'enable'." },
    { q: "Quelle commande permet de chiffrer tous les mots de passe en clair dans la configuration ?", options: ["enable secret", "service password-encryption", "line console 0", "copy run start"], a: 1, e: "Service password-encryption applique un chiffrement faible." },
    { q: "Que faut-il configurer sur un switch pour pouvoir le g√©rer √† distance ?", options: ["Une interface Loopback", "Une interface SVI (Vlan) avec une IP", "Le protocole OSPF", "Un c√¢ble console"], a: 1, e: "Une SVI (Switch Virtual Interface) est n√©cessaire pour l'IP de gestion." },
    { q: "Quelle est la longueur en bits d'une adresse IPv4 ?", options: ["32 bits", "48 bits", "64 bits", "128 bits"], a: 0, e: "32 bits (4 octets)." },
    { q: "Quelle est l'adresse de broadcast pour le r√©seau 192.168.10.0/24 ?", options: ["192.168.10.1", "192.168.10.0", "192.168.10.254", "192.168.10.255"], a: 3, e: "La derni√®re adresse de la plage est le broadcast." },
    { q: "Quelle est la fonction principale du masque de sous-r√©seau ?", options: ["Crypter les donn√©es", "Distinguer la partie r√©seau de la partie h√¥te", "Traduire les noms DNS", "Attribuer une IP automatiquement"], a: 1, e: "Il s√©pare le NetID du HostID." },
    { q: "Quelle est la plage d'adresses priv√©es de classe C ?", options: ["10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16", "169.254.0.0/16"], a: 2, e: "192.168.x.x est la classe C priv√©e." },
    { q: "Combien de bits compose une adresse IPv6 ?", options: ["32", "64", "128", "256"], a: 2, e: "128 bits." },
    { q: "Quelle est la compression correcte pour l'adresse IPv6 2001:0db8:0000:0000:0000:0000:0000:0001 ?", options: ["2001:db8:0:0:0:0:0:1", "2001:db8::1", "2001:db8:::1", "2001:db8::"], a: 1, e: "Le double deux-points remplace la plus longue suite de z√©ros." },
    { q: "Par quel pr√©fixe commence une adresse IPv6 Link-local ?", options: ["2001::", "fe80::", "::1", "ff00::"], a: 1, e: "fe80:: est r√©serv√© au lien local." },
    { q: "Quelle commande permet d'afficher la table de routage ?", options: ["show ip int brief", "show run", "show ip route", "ping"], a: 2, e: "show ip route." },
    { q: "Que signifie la lettre 'C' dans la table de routage ?", options: ["Connect√© directement", "Statique", "OSPF", "RIP"], a: 0, e: "C = Connected." },
    { q: "Que repr√©sente la distance administrative (AD) d'un protocole ?", options: ["La distance physique", "Le nombre de sauts", "La fiabilit√© de la source de routage", "La vitesse du lien"], a: 2, e: "Plus l'AD est basse, plus le protocole est fiable." },
    { q: "Quel protocole de routage utilise le nombre de sauts comme seule m√©trique ?", options: ["OSPF", "EIGRP", "RIP", "BGP"], a: 2, e: "RIP (Max 15 sauts)." },
    { q: "Quelle commande configure la passerelle par d√©faut sur un switch ?", options: ["ip route", "ip default-gateway", "interface vlan 1", "ip address"], a: 1, e: "ip default-gateway en mode config globale." },
    { q: "Quel est l'avantage principal de SSH par rapport √† Telnet ?", options: ["Plus rapide", "Plus facile", "Chiffre les communications", "Ne n√©cessite pas de login"], a: 2, e: "SSH est s√©curis√©, Telnet est en clair." },
    { q: "Lors de l'encapsulation de la couche Transport vers R√©seau, que devient le segment ?", options: ["Un paquet", "Une trame", "Des bits", "Une adresse MAC"], a: 0, e: "Le PDU de couche 3 est le Paquet." },
    { q: "Quelle commande permet de voir la configuration de d√©marrage (NVRAM) ?", options: ["show running-config", "show startup-config", "show version", "show flash"], a: 1, e: "startup-config." },
    { q: "Quel est le r√¥le du protocole DHCP ?", options: ["Routage", "Traduction de nom", "Attribution dynamique d'IP", "Transfert de fichier"], a: 2, e: "Dynamic Host Configuration Protocol." },
    { q: "Quelle est l'adresse de bouclage IPv4 (localhost) ?", options: ["127.0.0.1", "192.168.1.1", "0.0.0.0", "255.255.255.255"], a: 0, e: "127.0.0.1." },
    { q: "Quelle commande permet de nommer un routeur ?", options: ["name", "hostname", "description", "title"], a: 1, e: "hostname [nom]." },
    { q: "Quel est le but de la commande 'banner motd' ?", options: ["R√©gler l'heure", "Afficher un message d'avertissement l√©gal", "Changer le nom du routeur", "Configurer le mot de passe"], a: 1, e: "Message Of The Day." },
    { q: "Quelle est la notation CIDR pour le masque 255.255.255.0 ?", options: ["/8", "/16", "/24", "/32"], a: 2, e: "24 bits √† 1." },
    { q: "Quel protocole s√©curis√© est utilis√© pour l'administration en ligne de commande ?", options: ["Telnet", "HTTP", "SSH", "TFTP"], a: 2, e: "SSH (Secure Shell)." },
    { q: "Quelle commande permet d'activer une interface r√©seau ?", options: ["enable", "start", "no shutdown", "activation"], a: 2, e: "no shutdown." },
    { q: "Quel est le r√¥le du champ TTL dans un paquet IP ?", options: ["Augmenter la vitesse", "√âviter les boucles infinies", "V√©rifier les erreurs", "Identifier la source"], a: 1, e: "Time To Live d√©cr√©mente √† chaque saut." },
    { q: "Quel protocole est utilis√© par la commande Ping ?", options: ["HTTP", "ICMP", "TCP", "UDP"], a: 1, e: "ICMP Echo Request/Reply." },
    { q: "Quelle est la diff√©rence principale entre les mod√®les TCP/IP et OSI ?", options: ["TCP/IP a 7 couches", "TCP/IP a 4 couches", "Ils sont identiques", "OSI est pour le wifi"], a: 1, e: "TCP/IP est un mod√®le pratique √† 4 couches." },
    { q: "Quel type de communication est 'Un vers plusieurs' (groupe) ?", options: ["Unicast", "Broadcast", "Multicast", "Simulcast"], a: 2, e: "Multicast." },
    { q: "Que signifie le pr√©fixe /64 dans une adresse IPv6 standard ?", options: ["64 bits r√©seau / 64 bits h√¥te", "L'adresse fait 64 bits", "Les 64 derniers bits sont le r√©seau", "C'est une adresse multicast"], a: 0, e: "C'est le d√©coupage standard pour un LAN IPv6." },
    { q: "Quel organisme g√®re l'allocation des adresses IP au niveau mondial ?", options: ["IEEE", "IANA/ICANN", "W3C", "ISO"], a: 1, e: "IANA." },
    { q: "Quel √©quipement de couche 2 utilise les adresses MAC pour commuter ?", options: ["Hub", "Routeur", "Switch", "Serveur"], a: 2, e: "Le Switch." },
    { q: "Que signifie l'acronyme SaaS ?", options: ["Storage as a Service", "Software as a Service", "System as a Service", "Switch as a Service"], a: 1, e: "Logiciel en tant que service." },
    { q: "Que signifie une adresse IP en 169.254.x.x ?", options: ["Internet OK", "DHCP OK", "√âchec DHCP (APIPA)", "C'est une IPv6"], a: 2, e: "Adresse auto-assign√©e (APIPA)." },
    { q: "Quel masque de sous-r√©seau correspond √† la notation /27 ?", options: ["255.255.255.192", "255.255.255.224", "255.255.255.240", "255.255.255.248"], a: 1, e: "/27 = 24 bits + 3 bits = 11100000 = .224." },
    { q: "Quelle commande permet de sauvegarder la configuration en cours en m√©moire NVRAM ?", options: ["save", "write memory", "copy running-config startup-config", "copy start run"], a: 2, e: "Copie de la RAM vers la NVRAM." },
    { q: "√Ä quelle couche du mod√®le OSI appartient l'adresse MAC ?", options: ["Physique", "Liaison de donn√©es", "R√©seau", "Transport"], a: 1, e: "Couche 2 (Liaison)." },
    { q: "Quel est le port par d√©faut utilis√© par le protocole HTTP ?", options: ["21", "23", "80", "443"], a: 2, e: "Port 80." },
    { q: "Quel est le port par d√©faut utilis√© par le protocole HTTPS ?", options: ["80", "8080", "443", "22"], a: 2, e: "Port 443." },
    { q: "Quel type de c√¢ble est utilis√© pour relier un PC √† un Switch ?", options: ["Crois√©", "Droit", "Console", "Fibre"], a: 1, e: "C√¢ble droit (Straight-through)." },
    { q: "Quel type de c√¢ble est utilis√© pour relier deux switchs entre eux ?", options: ["Crois√©", "Droit", "Console", "S√©rie"], a: 0, e: "C√¢ble crois√© (Crossover)." },
    { q: "Quelle est la plage d'adresses d√©finie pour la classe B ?", options: ["1-126", "128-191", "192-223", "224-239"], a: 1, e: "128.0.0.0 √† 191.255.0.0." },
    { q: "Quel protocole est utilis√© pour r√©soudre une adresse MAC en adresse IP ?", options: ["ARP", "RARP", "DNS", "DHCP"], a: 1, e: "RARP (Reverse ARP)." },
    { q: "Quel protocole est utilis√© pour r√©soudre une adresse IP en adresse MAC ?", options: ["ARP", "DNS", "DHCP", "ICMP"], a: 0, e: "ARP (Address Resolution Protocol)." },
    { q: "Quelle commande permet d'afficher la version de l'IOS et le registre de configuration ?", options: ["show running-config", "show flash", "show version", "show startup"], a: 2, e: "show version." },
    { q: "Quelle est l'adresse de r√©seau pour l'h√¥te 192.168.1.33 avec un masque /27 ?", options: ["192.168.1.0", "192.168.1.30", "192.168.1.32", "192.168.1.31"], a: 2, e: "Le pas est de 32. 33 est dans le sous-r√©seau commen√ßant √† .32." },
    { q: "Quel est le but principal de la traduction d'adresses r√©seau (NAT) ?", options: ["Traduire les IP priv√©es en IP publiques", "Chiffrer les donn√©es", "Router les paquets", "Bloquer les virus"], a: 0, e: "Permet d'√©conomiser les adresses IPv4 publiques." },
    { q: "Quel appareil permet de segmenter les domaines de collision mais pas les domaines de diffusion ?", options: ["Hub", "Switch", "Routeur", "R√©p√©teur"], a: 1, e: "Le switch cr√©e un domaine de collision par port." },
    { q: "Si les protocoles OSPF et EIGRP sont configur√©s, quel protocole sera choisi par le routeur pour acheminer le trafic ?", options: ["OSPF", "EIGRP", "BGP", "RIP"], a: 1, e: "EIGRP a une distance administrative (90) inf√©rieure √† OSPF (110)." },
    { q: "Si les protocoles RIP et OSPF sont configur√©s, quel protocole sera choisi par le routeur ?", options: ["RIP", "OSPF", "Le premier configur√©", "Al√©atoire"], a: 1, e: "OSPF (110) a une priorit√© plus √©lev√©e que RIP (120)." },
    { q: "Quelle commande permet de d√©sactiver le protocole RIP ?", options: ["no router rip", "disable rip", "stop rip", "rip off"], a: 0, e: "Mode configuration globale." },
    { q: "Quelle est la forme du signal transmis dans une fibre optique ?", options: ["Impulsions √©lectriques", "Impulsions lumineuses", "Ondes radio", "Sonore"], a: 1, e: "La lumi√®re." },
    { q: "Quelle est la forme du signal transmis dans un c√¢ble coaxial ?", options: ["Impulsions √©lectriques", "Impulsions lumineuses", "Ondes radio", "Magn√©tique"], a: 0, e: "L'√©lectricit√©." },
    { q: "Quel est le masque de sous-r√©seau par d√©faut pour la classe A ?", options: ["255.0.0.0", "255.255.0.0", "255.255.255.0", "0.0.0.0"], a: 0, e: "/8." },
    { q: "Quel est le masque de sous-r√©seau par d√©faut pour la classe B ?", options: ["255.0.0.0", "255.255.0.0", "255.255.255.0", "0.0.0.0"], a: 1, e: "/16." },
    { q: "Combien d'adresses h√¥tes utilisables contient un sous-r√©seau /24 ?", options: ["256", "254", "255", "253"], a: 1, e: "256 - 2 (r√©seau + broadcast) = 254." },
    { q: "Quelle commande permet d'attribuer une description √† une interface ?", options: ["name", "description", "label", "comment"], a: 1, e: "description [texte]." },
    { q: "Quelle commande permet de d√©sactiver le routage IP sur un routeur ?", options: ["no ip routing", "no router", "stop routing", "shutdown"], a: 0, e: "Transforme le routeur en simple h√¥te." },
    { q: "Quelle commande d'ACL permet de bloquer le trafic ICMP (Ping) ?", options: ["access-list deny icmp", "no ping", "block icmp", "stop ping"], a: 0, e: "deny icmp." },
    { q: "Quelle est la r√®gle implicite qui se trouve √† la fin de toute ACL ?", options: ["Permit any", "Deny any (Tout refuser)", "Permit local", "Log"], a: 1, e: "Tout ce qui n'est pas autoris√© est interdit." },
    { q: "Quelle commande permet d'afficher les listes de contr√¥le d'acc√®s (ACL) ?", options: ["show access-lists", "show rules", "display acl", "show filter"], a: 0, e: "Affiche les ACLs configur√©es." },
    { q: "Quelle est l'adresse de boucle locale (Loopback) en IPv6 ?", options: ["::1", "127.0.0.1", "::", "FE80::1"], a: 0, e: "::1." },
    { q: "Dans le format EUI-64, quel bit de l'adresse MAC est invers√© ?", options: ["Le 7√®me bit", "Le 1er bit", "Le dernier bit", "Aucun"], a: 0, e: "Le bit U/L (Universel/Local)." },
    { q: "Quel protocole permet l'autoconfiguration IPv6 sans √©tat (SLAAC) ?", options: ["DHCPv6", "NDP", "Static", "EUI"], a: 1, e: "Utilise les annonces de routeur (RA)." },
    { q: "Quel message NDP est utilis√© pour annoncer la pr√©sence d'un routeur ?", options: ["NS", "NA", "RS", "RA (Router Advertisement)"], a: 3, e: "RA." },
    { q: "Quel message NDP est utilis√© pour solliciter l'adresse MAC d'un voisin ?", options: ["NS (Neighbor Solicitation)", "NA", "RS", "RA"], a: 0, e: "√âquivalent de la requ√™te ARP." },
    { q: "Quelle est l'adresse multicast IPv6 pour 'Tous les n≈ìuds' ?", options: ["FF02::1", "FF02::2", "FF02::5", "FF02::A"], a: 0, e: "All Nodes." },
    { q: "Quelle est l'extension de fichier typique d'une image Cisco IOS ?", options: [".bin", ".exe", ".iso", ".tar"], a: 0, e: "Fichier binaire." },
    { q: "Quel syst√®me de fichiers Cisco permet de g√©rer les fichiers en ligne de commande ?", options: ["IFS (IOS File System)", "NTFS", "FAT", "EXT"], a: 0, e: "IFS." },
    { q: "Quelle commande permet de lister les fichiers dans la m√©moire flash ?", options: ["ls", "dir", "list", "show files"], a: 1, e: "dir flash:." },
    { q: "Quelle commande permet d'effacer un fichier de la m√©moire flash ?", options: ["delete", "remove", "erase", "rm"], a: 0, e: "delete flash:filename." },
    { q: "Quelle commande permet de v√©rifier l'int√©grit√© d'un fichier IOS (MD5) ?", options: ["verify", "check", "md5", "hash"], a: 0, e: "verify /md5." },
    { q: "Quel est le masque wildcard correspondant au masque /24 ?", options: ["0.0.0.255", "255.255.255.0", "0.0.255.255", "0.0.0.0"], a: 0, e: "L'inverse binaire de 255.255.255.0." },
    { q: "Quelle commande permet de voir l'historique des commandes saisies ?", options: ["show history", "history", "recall", "list"], a: 0, e: "Affiche le tampon historique." },
    { q: "Quelle est la taille par d√©faut de l'historique de commandes ?", options: ["10 lignes", "20 lignes", "50 lignes", "100 lignes"], a: 0, e: "10 commandes." },
    { q: "Quelle commande permet de remettre le routeur en configuration d'usine ?", options: ["erase startup-config", "delete nvram", "reset", "factory"], a: 0, e: "Puis 'reload'." },
    { q: "Quel port est utilis√© par le canal de donn√©es FTP ?", options: ["20", "21", "22", "23"], a: 0, e: "Port 20." },
    { q: "Quel port est utilis√© par le canal de contr√¥le FTP ?", options: ["20", "21", "22", "23"], a: 1, e: "Port 21." },
    { q: "Quelle topologie r√©seau poss√®de un point central de connexion ?", options: ["√âtoile", "Bus", "Anneau", "Maill√©e"], a: 0, e: "Topologie Star." },
    { q: "Quelle topologie r√©seau offre la meilleure redondance ?", options: ["Maill√©e compl√®te", "√âtoile", "Bus", "Anneau"], a: 0, e: "Tous les n≈ìuds sont connect√©s entre eux." },
    { q: "Quel type de fibre optique est utilis√© pour les longues distances ?", options: ["Monomode", "Multimode", "Coax", "UTP"], a: 0, e: "Source Laser." },
    { q: "Quel type de fibre optique utilise une LED comme source lumineuse ?", options: ["Monomode", "Multimode", "Coax", "UTP"], a: 1, e: "Courte distance." },
    { q: "Quelle cat√©gorie de c√¢ble Ethernet supporte 1 Gbps au minimum ?", options: ["Cat5e", "Cat3", "Cat4", "Coax"], a: 0, e: "Cat5e ou Cat6." },
    { q: "Quelle est la distance maximale th√©orique d'un c√¢ble UTP Ethernet ?", options: ["100 m√®tres", "50 m√®tres", "200 m√®tres", "500 m√®tres"], a: 0, e: "Standard 100m." },
    { q: "Quelle commande Windows permet d'afficher le cache ARP ?", options: ["arp -a", "show arp", "ip arp", "getmac"], a: 0, e: "Commande DOS." },
    { q: "Quelle commande Windows permet d'afficher la configuration IP ?", options: ["ipconfig", "ifconfig", "show ip", "ip addr"], a: 0, e: "ifconfig est pour Linux." },
    { q: "Quelle commande Windows permet de tracer la route vers une destination ?", options: ["tracert", "traceroute", "trace", "pathping"], a: 0, e: "tracert (traceroute sur Cisco)." },

    // ==================================================================
    // PARTIE 2 : QUESTIONS SP√âCIFIQUES (R√â√âCRITES - STYLE FORMEL)
    // ==================================================================

    // --- CONCEPTS R√âSEAU ---
    { q: "Quel p√©riph√©rique r√©seau a pour fonction principale de d√©terminer le meilleur chemin pour les paquets ?", options: ["Le P√©riph√©rique interm√©diaire (Routeur)", "Le P√©riph√©rique final", "Le Serveur", "Le Support de transmission"], a: 0, e: "Les routeurs prennent les d√©cisions de routage bas√©es sur les adresses IP." },
    { q: "Quelle est la diff√©rence majeure entre un r√©seau WAN et un r√©seau LAN ?", options: ["Le WAN interconnecte des r√©seaux sur de vastes zones g√©ographiques.", "Le WAN est administr√© localement par une entreprise.", "Le WAN couvre uniquement une maison.", "Le WAN offre toujours plus de d√©bit que le LAN."], a: 0, e: "WAN signifie Wide Area Network (R√©seau √©tendu)." },
    { q: "Que signifie le concept de 'tol√©rance aux pannes' en r√©seau ?", options: ["Limiter l'impact d'une panne et permettre une r√©cup√©ration rapide.", "Prot√©ger le r√©seau contre les piratages.", "Permettre au r√©seau de s'√©tendre rapidement.", "Prioriser la voix sur les donn√©es."], a: 0, e: "C'est la capacit√© du r√©seau √† continuer de fonctionner malgr√© une d√©faillance." },
    { q: "Quel est le but principal de l'encapsulation des donn√©es ?", options: ["Ajouter des en-t√™tes de protocole √† chaque couche du mod√®le.", "Compresser les donn√©es pour gagner de la place.", "Chiffrer les donn√©es pour la s√©curit√©.", "Diviser les messages en petits morceaux."], a: 0, e: "Les donn√©es deviennent Segment, puis Paquet, puis Trame." },
    { q: "Quelle couche du mod√®le TCP/IP regroupe les fonctions des couches Physique et Liaison du mod√®le OSI ?", options: ["La couche Acc√®s r√©seau", "La couche Transport", "La couche Application", "La couche Internet"], a: 0, e: "C'est la couche la plus basse du mod√®le TCP/IP." },
    { q: "Quel organisme international g√®re l'allocation des adresses IP publiques et des noms de domaine ?", options: ["L'ICANN (IANA)", "L'IEEE", "L'ISO", "La TIA"], a: 0, e: "Internet Corporation for Assigned Names and Numbers." },
    { q: "Dans quel type de m√©moire est stock√©e la configuration en cours (running-config) ?", options: ["En RAM", "En NVRAM", "En Flash", "En ROM"], a: 0, e: "La RAM est volatile, d'o√π la perte de config au red√©marrage si non sauvegard√©e." },
    { q: "Quelle op√©ration logique est utilis√©e par un routeur pour d√©terminer l'adresse r√©seau √† partir d'une IP ?", options: ["Le ET logique (AND)", "Le OU logique (OR)", "Le OU exclusif (XOR)", "L'inversion (NOT)"], a: 0, e: "Adresse IP + Masque (AND) = Adresse R√©seau." },
    { q: "Quelle est la raison principale ayant motiv√© le d√©veloppement du protocole IPv6 ?", options: ["L'√©puisement des adresses IPv4 publiques.", "L'am√©lioration de la s√©curit√©.", "L'augmentation de la vitesse de transmission.", "La complexit√© de configuration d'IPv4."], a: 0, e: "Les 4,3 milliards d'adresses IPv4 ne suffisaient plus." },
    { q: "Quel est le pr√©fixe de sous-r√©seau standard recommand√© pour un LAN en IPv6 ?", options: ["/64", "/32", "/48", "/128"], a: 0, e: "Le /64 est n√©cessaire pour le fonctionnement de l'autoconfiguration (SLAAC)." },
    
    // --- ROUTAGE & PROTOCOLES ---
    { q: "Quel est l'objectif principal de la configuration d'une route statique ?", options: ["Permettre √† l'administrateur de d√©finir manuellement un chemin pr√©cis.", "Apprendre automatiquement la topologie du r√©seau.", "Connecter des PC entre eux.", "Aucun, c'est obsol√®te."], a: 0, e: "Elle offre un contr√¥le total du trafic mais ne s'adapte pas aux pannes." },
    { q: "Si le 'Next-Hop' d'une route statique est une adresse IP, que doit faire le routeur ?", options: ["Effectuer une consultation r√©cursive pour trouver l'interface de sortie.", "Envoyer directement le paquet.", "Jeter le paquet.", "Envoyer un broadcast."], a: 0, e: "Il doit chercher dans la table de routage comment atteindre cette IP de saut suivant." },
    { q: "Dans le processus de routage, que signifie la r√®gle du 'Longest Match' (Correspondance la plus longue) ?", options: ["Le routeur utilise la route avec le masque le plus pr√©cis (le plus long).", "Le routeur utilise le protocole le plus rapide.", "Le routeur utilise la route par d√©faut.", "Le routeur utilise la premi√®re route trouv√©e."], a: 0, e: "Un /32 sera toujours pr√©f√©r√© √† un /24 pour la m√™me destination." },
    { q: "Qu'est-ce qu'une route statique flottante ?", options: ["Une route de secours avec une Distance Administrative plus √©lev√©e.", "Une route principale.", "Une route pour le trafic rapide.", "Une route sans fil."], a: 0, e: "Elle ne s'active que si la route principale (AD plus basse) tombe." },
    { q: "Quels param√®tres sont utilis√©s pour calculer la m√©trique EIGRP par d√©faut ?", options: ["La Bande passante et le D√©lai", "Le nombre de Sauts", "Le Co√ªt OSPF", "La Vitesse du lien"], a: 0, e: "C'est une m√©trique composite bas√©e sur les valeurs K." },
    { q: "Quel code identifie une route apprise par EIGRP dans la table de routage ?", options: ["D", "E", "O", "R"], a: 0, e: "D provient de l'algorithme DUAL utilis√© par EIGRP." },
    { q: "Quel protocole de couche 3 est utilis√© par la commande Traceroute pour signaler les sauts ?", options: ["ICMP (Time Exceeded)", "UDP", "TCP", "IP"], a: 0, e: "Les routeurs renvoient un message ICMP quand le TTL expire." },
    { q: "Que d√©signe le terme 'Gateway of last resort' (Passerelle de dernier recours) ?", options: ["La route par d√©faut (0.0.0.0/0).", "Le dernier routeur du r√©seau.", "La connexion Internet.", "La passerelle du PC."], a: 0, e: "C'est la route utilis√©e si aucune autre route ne correspond." },

    // --- VLAN & TRUNKING ---
    { q: "Quel est l'identifiant (ID) du VLAN par d√©faut sur tous les commutateurs Cisco ?", options: ["VLAN 1", "VLAN 10", "VLAN 99", "VLAN 100"], a: 0, e: "Tous les ports sont dans le VLAN 1 par d√©faut." },
    { q: "Quel est le protocole standard de l'IEEE utilis√© pour le trunking (√©tiquetage) ?", options: ["802.1Q", "ISL", "DTP", "VTP"], a: 0, e: "Dot1Q est le standard ouvert, ISL est l'ancien propri√©taire Cisco." },
    { q: "Quelle commande permet de cr√©er un nouveau VLAN en mode de configuration globale ?", options: ["vlan [ID]", "interface vlan", "switchport vlan", "set vlan"], a: 0, e: "Exemple : vlan 10." },
    { q: "Quel mode DTP force l'interface √† devenir un Trunk, sans n√©gociation ?", options: ["switchport mode trunk", "dynamic auto", "dynamic desirable", "switchport mode access"], a: 0, e: "Cela active le trunking inconditionnellement." },
    { q: "Quel est l'effet de la commande 'switchport nonegotiate' sur une interface ?", options: ["Elle emp√™che l'envoi de trames DTP.", "Elle force le protocole DTP.", "Elle bloque le port en mode trunk.", "Elle ne fait rien."], a: 0, e: "Utile pour s√©curiser le port et gagner du temps." },
    { q: "Quel est l'objectif principal de la configuration d'un VLAN Voix ?", options: ["S√©parer et prioriser le trafic t√©l√©phonique (QoS).", "Utiliser le t√©l√©phone pour les donn√©es.", "C'est inutile.", "C'est le VLAN 1."], a: 0, e: "La voix est sensible au d√©lai et doit √™tre prioritaire." },
    { q: "Que se passe-t-il si les VLANs natifs sont configur√©s diff√©remment aux deux extr√©mit√©s d'un lien Trunk ?", options: ["Une erreur 'Native VLAN Mismatch' appara√Æt et du trafic peut √™tre perdu.", "Rien, cela fonctionne.", "Le lien s'√©teint.", "Le VLAN est supprim√©."], a: 0, e: "C'est aussi un risque de s√©curit√© (VLAN Hopping)." },
    { q: "Quelle est la taille de l'√©tiquette (Tag) 802.1Q ins√©r√©e dans la trame Ethernet ?", options: ["4 octets", "2 octets", "8 octets", "1 octet"], a: 0, e: "Ce tag contient l'ID du VLAN et la priorit√©." },
    { q: "Qu'appelle-t-on un 'Black Hole VLAN' en s√©curit√© ?", options: ["Un VLAN isol√© o√π l'on place les ports inutilis√©s.", "Le VLAN 1.", "Le VLAN Natif.", "Une erreur de configuration."], a: 0, e: "Cela emp√™che un attaquant de se brancher sur un port libre." },
    { q: "En quoi consiste la m√©thode 'Router-on-a-stick' ?", options: ["Utiliser des sous-interfaces pour router entre VLANs.", "Utiliser un Switch L3.", "Utiliser un routeur par VLAN.", "Utiliser un pont."], a: 0, e: "Une seule interface physique trunk√©e g√®re plusieurs passerelles." },
    { q: "Est-il possible de supprimer le VLAN 1 sur un switch Cisco ?", options: ["Non, c'est impossible.", "Oui, en mode config.", "Oui, avec un mot de passe.", "Oui, en mode root."], a: 0, e: "C'est le VLAN de gestion par d√©faut et il est inamovible." },

    // --- OSPF ---
    { q: "√Ä quelle cat√©gorie de protocoles de routage appartient OSPF ?", options: ["√âtat de liens (Link-State)", "Vecteur de distance", "Hybride", "Statique"], a: 0, e: "Il connait la topologie compl√®te du r√©seau." },
    { q: "Quelle formule est utilis√©e par OSPF pour calculer son co√ªt (m√©trique) ?", options: ["Bande passante de r√©f√©rence / Bande passante de l'interface", "Nombre de sauts", "D√©lai total", "Charge du lien"], a: 0, e: "Plus la bande passante est √©lev√©e, plus le co√ªt est bas." },
    { q: "Quelle est l'adresse Multicast utilis√©e pour contacter tous les routeurs OSPF ?", options: ["224.0.0.5", "224.0.0.6", "224.0.0.1", "224.0.0.9"], a: 0, e: "224.0.0.6 est pour les DR/BDR uniquement." },
    { q: "Quel type de paquet OSPF est utilis√© pour maintenir le voisinage (Keepalive) ?", options: ["Hello", "LSU", "DBD", "LSR"], a: 0, e: "Envoy√© p√©riodiquement (ex: 10s)." },
    { q: "Comment se nomme la zone principale (Backbone) obligatoire dans OSPF ?", options: ["Zone 0", "Zone 1", "Zone 100", "Zone B"], a: 0, e: "Toutes les autres zones doivent s'y connecter." },
    { q: "Quel est le premier crit√®re pour l'√©lection du routeur d√©sign√© (DR) ?", options: ["La priorit√© d'interface la plus haute", "L'adresse IP la plus basse", "L'adresse MAC la plus haute", "Le hasard"], a: 0, e: "Si √©galit√©, on regarde le Router ID." },
    { q: "Dans quel ordre un routeur OSPF choisit-il son Router-ID (RID) ?", options: ["ID manuel > Interface Loopback > Interface Physique", "Interface Physique > Loopback", "IP la plus basse", "Adresse MAC"], a: 0, e: "La configuration manuelle est toujours prioritaire." },
    { q: "Quel est l'intervalle Hello par d√©faut sur un r√©seau Ethernet (Broadcast) ?", options: ["10 secondes", "30 secondes", "5 secondes", "60 secondes"], a: 0, e: "Le Dead Interval est 4 fois le Hello (40s)." },
    { q: "Quel est l'effet de la commande 'passive-interface' sur une interface OSPF ?", options: ["Elle arr√™te l'envoi de paquets Hello mais continue d'annoncer le r√©seau.", "Elle d√©sactive l'interface compl√®tement.", "Elle passe l'interface en mode switch.", "Elle ne fait rien."], a: 0, e: "On l'utilise vers les LANs pour ne pas bavarder inutilement." },
    { q: "Quel √©tat OSPF indique que les bases de donn√©es sont parfaitement synchronis√©es ?", options: ["Full", "2-Way", "Loading", "ExStart"], a: 0, e: "C'est l'√©tat final d√©sir√©." },
    { q: "Que signifie une priorit√© OSPF configur√©e √† 0 sur une interface ?", options: ["Le routeur ne deviendra jamais DR ni BDR.", "Le routeur sera DR forc√©.", "Le routeur sera BDR forc√©.", "Le routeur est le chef."], a: 0, e: "Il reste en √©tat DROther." },
    { q: "Quelle table OSPF contient la carte topologique compl√®te du r√©seau ?", options: ["La LSDB (Link-State Database)", "La table de routage", "La table ARP", "La table MAC"], a: 0, e: "Elle contient tous les LSA re√ßus." },
    { q: "Quel algorithme math√©matique est utilis√© par OSPF pour calculer le meilleur chemin ?", options: ["Dijkstra (SPF - Shortest Path First)", "DUAL", "Bellman-Ford", "Kruskal"], a: 0, e: "Il calcule l'arbre du plus court chemin." },
    { q: "Qui g√©n√®re les LSA de Type 1 (Router LSA) ?", options: ["Chaque routeur OSPF", "Seulement le DR", "Seulement l'ABR", "Les routeurs externes"], a: 0, e: "Tout routeur d√©crit ses propres liens." },
    { q: "Quelle commande permet de propager une route par d√©faut dans OSPF ?", options: ["default-information originate", "network 0.0.0.0", "redistribute static", "ip route static"], a: 0, e: "Elle injecte la passerelle de dernier recours." },

    // ==================================================================
    // PARTIE 3 : LES 20 NOUVELLES QUESTIONS (AJOUT√âES √Ä LA FIN)
    // ==================================================================

    { q: "Dans le processus de commutation, comment un switch apprend-il les adresses MAC ?", options: ["En lisant l'adresse MAC source des trames entrantes.", "En lisant l'adresse MAC de destination.", "Via le protocole ARP.", "Il les connait par d√©faut."], a: 0, e: "Il associe la MAC source au port d'entr√©e dans sa table CAM." },
    { q: "Quelle est la distance administrative d'une route statique standard ?", options: ["1", "0", "90", "110"], a: 0, e: "C'est tr√®s fiable. (0 est pour directement connect√©)." },
    { q: "√Ä quoi sert le protocole NTP dans un r√©seau Cisco ?", options: ["Synchroniser l'horloge des √©quipements pour des logs pr√©cis.", "Transf√©rer des fichiers.", "G√©rer le routage.", "Tester la connectivit√©."], a: 0, e: "Network Time Protocol est crucial pour le d√©pannage (Syslog)." },
    { q: "Quel type d'interface permet d'avoir plusieurs adresses IP sur un seul port physique pour les VLANs ?", options: ["Une sous-interface (ex: G0/0.10).", "Une interface Loopback.", "Une interface Console.", "Une interface Null."], a: 0, e: "Utilis√© pour le routage Inter-VLAN (Router-on-a-stick)." },
    { q: "Quel masque de sous-r√©seau permet d'avoir exactement 14 h√¥tes utilisables ?", options: ["/28 (255.255.255.240)", "/27", "/29", "/30"], a: 0, e: "4 bits h√¥tes : 2^4 = 16. Moins 2 (R√©seau/Broadcast) = 14." },
    { q: "Quel est le r√¥le du contr√¥le de flux (Flow Control) √† la couche 4 ?", options: ["G√©rer la vitesse de transmission pour √©viter la congestion.", "Router les paquets.", "D√©finir les adresses IP.", "Convertir le signal."], a: 0, e: "TCP utilise le fen√™trage (Windowing) pour cela." },
    { q: "Quelle commande permet d'afficher un r√©sum√© rapide de l'√©tat des interfaces IP ?", options: ["show ip interface brief", "show interfaces", "show ip route", "show run"], a: 0, e: "Affiche l'IP, le statut L1 (Physical) et L2 (Protocol)." },
    { q: "Quel terme d√©crit la diaphonie (interf√©rence) entre deux paires de fils dans un c√¢ble ?", options: ["Crosstalk", "Att√©nuation", "Jitter", "Latence"], a: 0, e: "C'est une perturbation √©lectromagn√©tique interne au c√¢ble." },
    { q: "Quelle commande permet de d√©finir un message d'avertissement l√©gal √† la connexion ?", options: ["banner motd #Message#", "banner login", "message welcome", "hostname Message"], a: 0, e: "Message Of The Day." },
    { q: "En IPv6, comment est repr√©sent√© un sous-r√©seau /64 typique ?", options: ["4 blocs hexad√©cimaux pour le r√©seau, 4 pour l'interface.", "32 bits r√©seau.", "128 bits r√©seau.", "Tout est al√©atoire."], a: 0, e: "64 bits Pr√©fixe + 64 bits ID Interface." },
    { q: "Quelle est la principale diff√©rence entre un Switch de couche 2 et un Switch de couche 3 ?", options: ["Le Switch L3 peut effectuer du routage inter-VLAN.", "Le Switch L3 est plus lent.", "Le Switch L2 comprend les adresses IP.", "Aucune diff√©rence."], a: 0, e: "Le Switch L3 poss√®de des fonctions de routage (SVI, ports rout√©s)." },
    { q: "Quelle commande permet de configurer manuellement la vitesse d'une interface ?", options: ["speed 1000", "bandwidth 1000", "clock rate 1000", "duplex full"], a: 0, e: "La commande 'speed' fixe la vitesse physique du port." },
    { q: "Quel protocole permet √† un PC d'obtenir automatiquement l'adresse d'un serveur DNS ?", options: ["DHCP", "DNS", "ARP", "HTTP"], a: 0, e: "Le serveur DHCP fournit l'IP, le Masque, la Gateway et le DNS." },
    { q: "Quel est l'√©tat initial d'un port de switch lorsqu'il vient de s'allumer (avant forwarding) ?", options: ["Blocking / Listening", "Forwarding", "Disabled", "Routing"], a: 0, e: "STP bloque le port temporairement pour √©couter les boucles." },
    { q: "Quelle commande permet d'emp√™cher les messages de log d'interrompre votre saisie en console ?", options: ["logging synchronous", "no logging", "quiet mode", "service timestamps"], a: 0, e: "√Ä configurer dans 'line console 0'." },
    { q: "Quel est le but de la commande 'copy running-config tftp' ?", options: ["Sauvegarder la configuration sur un serveur distant.", "Sauvegarder en local.", "Effacer la configuration.", "Charger une image IOS."], a: 0, e: "Utile pour les backups externes." },
    { q: "Quelle caract√©ristique d√©finit le protocole UDP ?", options: ["Sans connexion et sans garantie de livraison (Best Effort).", "Orient√© connexion.", "Fiable.", "Lent."], a: 0, e: "Utilis√© pour la voix et la vid√©o (streaming)." },
    { q: "Pourquoi utilise-t-on la fibre optique plut√¥t que le cuivre entre deux b√¢timents ?", options: ["Immunit√© aux interf√©rences √©lectriques et distance.", "Moins cher.", "Plus facile √† plier.", "Alimente les t√©l√©phones (PoE)."], a: 0, e: "La fibre ne conduit pas l'√©lectricit√© (pas de foudre/interf√©rences)." },
    { q: "Quelle commande permet de voir les voisins connect√©s via le protocole CDP ?", options: ["show cdp neighbors", "show ip route", "show neighbors", "ping"], a: 0, e: "Affiche le type d'appareil, l'interface et l'IP du voisin Cisco." },
    { q: "Dans une ACL, quel masque wildcard correspond √† un h√¥te unique (ex: 192.168.1.1) ?", options: ["0.0.0.0", "255.255.255.255", "0.0.0.255", "Host 1.1.1.1"], a: 0, e: "0 signifie 'doit correspondre exactement'." }

];

// DUPLICATION POUR LA DEMO (En prod, vous aurez 100+ questions uniques)
while(FULL_DB.length < 100) { FULL_DB.push(...FULL_DB); }

// --- LOGIQUE APPLICATION ---
let quizQuestions = [];
let userAnswers = [];
let timerInterval;
let timeLeft = DURATION_MIN * 60;
let cheatCount = 0;

// V√âRIFICATION ANTI-RESTART AU CHARGEMENT (MODE: COMMENT√â POUR VOS TESTS)
window.onload = function() {
    // Si vous voulez activer la protection anti-restart d√®s le chargement :
    if(localStorage.getItem('ccna_exam_done_locked')) {
          document.getElementById('login-screen').style.display = 'none';
          document.getElementById('locked-screen').style.display = 'flex';
     }
};

// LANCEMENT EXAMEN
function startExam() {
    const name = document.getElementById('name').value.trim();
    const school = document.getElementById('school').value.trim();
    const major = document.getElementById('major').value.trim();

    if(!name || !school || !major) {
        alert("Veuillez remplir tous les champs obligatoires.");
        return;
    }

    // PLEIN √âCRAN FORC√â
    document.documentElement.requestFullscreen().catch(e => console.log("Plein √©cran refus√©"));

    // PR√âPARATION DONN√âES
    quizQuestions = FULL_DB.slice(0, REQUIRED_Q).sort(() => 0.5 - Math.random());
    userAnswers = new Array(REQUIRED_Q).fill(null);

    // MISE A JOUR HEADER INFO
    document.getElementById('user-display').innerHTML = `
        <div style="font-weight:bold;">Candidat : ${name}</div>
        <div style="font-size:0.85rem; opacity:0.9;">${major} | ${school} | Enseignant : Elvis TCHIMEGNI</div>
    `;
    
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('app-header').style.display = 'flex';
    document.getElementById('app-content').style.display = 'flex';
    document.getElementById('app-footer').style.display = 'flex';

    renderQuestions();
    generatePalette();
    startTimer();
    
    // ANTI-TRICHE LISTENERS
    document.addEventListener("visibilitychange", handleCheat);
    window.addEventListener("blur", handleCheat);
    document.addEventListener("fullscreenchange", checkFullScreen);
}

// RENDU QUESTIONS
function renderQuestions() {
    const container = document.getElementById('quiz-questions');
    container.innerHTML = "";
    
    quizQuestions.forEach((q, index) => {
        let isMulti = q.type === 'multi';
        let typeLabel = isMulti ? `<span class="multi-hint">(Choisir ${q.count} r√©ponses)</span>` : '';
        
        let html = `<div class="question-card" id="q-${index}">
            <div class="q-text">${index + 1}. ${q.q} ${typeLabel}</div>`;
            
        q.options.forEach((opt, i) => {
            let markerClass = isMulti ? 'check' : 'radio';
            html += `<div class="option" id="opt-${index}-${i}" onclick="handleSelection(${index}, ${i}, ${isMulti}, ${q.count})">
                <div class="marker ${markerClass}"></div>
                ${opt}
            </div>`;
        });
        
        html += `</div>`;
        container.innerHTML += html;
    });
    
    document.querySelector('.question-card').classList.add('active');
}

// GESTION S√âLECTION
function handleSelection(qIdx, optIdx, isMulti, maxCount) {
    if (isMulti) {
        let currentAns = userAnswers[qIdx] || [];
        let optDiv = document.getElementById(`opt-${qIdx}-${optIdx}`);
        
        if (currentAns.includes(optIdx)) {
            currentAns = currentAns.filter(a => a !== optIdx);
            optDiv.classList.remove('selected');
        } else {
            if (currentAns.length < maxCount) {
                currentAns.push(optIdx);
                optDiv.classList.add('selected');
            }
        }
        userAnswers[qIdx] = currentAns.length > 0 ? currentAns : null;
    } else {
        userAnswers[qIdx] = optIdx;
        for(let i=0; i<4; i++) {
            let el = document.getElementById(`opt-${qIdx}-${i}`);
            if(el) el.classList.remove('selected');
        }
        document.getElementById(`opt-${qIdx}-${optIdx}`).classList.add('selected');
    }
    updatePalette(qIdx);
}

// PALETTE
function generatePalette() {
    const grid = document.getElementById('palette-grid');
    grid.innerHTML = "";
    for(let i=0; i<REQUIRED_Q; i++) {
        let btn = document.createElement('div');
        btn.className = 'p-btn';
        btn.textContent = i+1;
        btn.id = `p-btn-${i}`;
        btn.onclick = () => jumpTo(i);
        grid.appendChild(btn);
    }
    document.getElementById('p-btn-0').classList.add('active');
}

function updatePalette(qIdx) {
    let btn = document.getElementById(`p-btn-${qIdx}`);
    if(userAnswers[qIdx] !== null) btn.classList.add('answered');
    else btn.classList.remove('answered');
}

// NAVIGATION
let currentQ = 0;
function nav(dir) {
    let next = currentQ + dir;
    if(next >= 0 && next < REQUIRED_Q) jumpTo(next);
}

function jumpTo(idx) {
    document.getElementById(`q-${currentQ}`).classList.remove('active');
    document.getElementById(`p-btn-${currentQ}`).classList.remove('active');
    
    currentQ = idx;
    
    document.getElementById(`q-${currentQ}`).classList.add('active');
    document.getElementById(`p-btn-${currentQ}`).classList.add('active');
    document.getElementById('q-indicator').textContent = `Question ${currentQ + 1} / ${REQUIRED_Q}`;
    
    document.getElementById(`p-btn-${currentQ}`).scrollIntoView({behavior:'smooth', block:'nearest'});

    // LOGIQUE BOUTON TERMINER
    if (currentQ === REQUIRED_Q - 1) {
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('finish-btn').style.display = 'block';
    } else {
        document.getElementById('next-btn').style.display = 'block';
        document.getElementById('finish-btn').style.display = 'none';
    }
}

// TIMER & S√âCURIT√â
function startTimer() {
    timerInterval = setInterval(() => {
        timeLeft--;
        let m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
        let s = (timeLeft % 60).toString().padStart(2, '0');
        document.getElementById('timer').textContent = `${m}:${s}`;
        
        if(timeLeft <= 0) {
            clearInterval(timerInterval);
            finishGame(true);
        }
    }, 1000);
}

function checkFullScreen() {
    if(!document.fullscreenElement) triggerCheat();
}

function handleCheat() {
    if (document.hidden) triggerCheat();
}

function triggerCheat() {
    cheatCount++; 
    document.getElementById('warn-count').textContent = cheatCount;
    if (cheatCount >= 3) {
        finishGame(true);
    } else {
        document.getElementById('cheat-overlay').style.display = 'flex';
    }
}

function closeCheat() {
    document.getElementById('cheat-overlay').style.display = 'none';
    document.documentElement.requestFullscreen().catch(e=>{});
}

// FIN
// FIN (MODIFI√â : OBLIGATION DE TOUT R√âPONDRE)
function checkFinish() {
    // Cherche la premi√®re question sans r√©ponse (null)
    let firstMissingIndex = userAnswers.findIndex(a => a === null);

    if (firstMissingIndex !== -1) {
        // Compte combien il en manque au total
        let missingCount = userAnswers.filter(a => a === null).length;
        
        alert(`‚õî ACTION IMPOSSIBLE\n\nVous devez r√©pondre √† TOUTES les questions avant de terminer.\n\nIl reste encore ${missingCount} questions sans r√©ponse.\nVous allez √™tre redirig√© vers la premi√®re question manquante.`);
        
        // Redirige l'utilisateur directement sur la question non r√©pondue
        jumpTo(firstMissingIndex);
        return; // Arr√™te la fonction ici, l'examen NE SE TERMINE PAS
    }

    // Si tout est rempli, on demande une derni√®re confirmation
    if(!confirm("Toutes les questions ont √©t√© trait√©es.\nConfirmer l'envoi d√©finitif de votre copie ?")) return;
    
    finishGame(false);
}

async function finishGame(forced) {
    clearInterval(timerInterval);
    document.removeEventListener("visibilitychange", handleCheat);
    window.removeEventListener("blur", handleCheat);
    document.removeEventListener("fullscreenchange", checkFullScreen);
    
    // VERROUILLAGE (Anti-Restart)
    // D√©commentez la ligne suivante pour bloquer le red√©marrage en production
     localStorage.setItem('ccna_exam_submitted_final', 'true');

    let score = 0;
    let details = "";
    
    quizQuestions.forEach((q, i) => {
        let userAns = userAnswers[i];
        let isCorrect = false;
        
        if (q.type === 'multi') {
            if (userAns && userAns.length === q.a.length) {
                let sortedUser = [...userAns].sort().toString();
                let sortedCorrect = [...q.a].sort().toString();
                if (sortedUser === sortedCorrect) isCorrect = true;
            }
            let userStr = userAns ? userAns.map(idx => q.options[idx]).join(", ") : "VIDE";
            details += `Q${i+1}: ${isCorrect?'OK':'NON'} | Rep: ${userStr}\n`;
        } else {
            if (userAns === q.a) isCorrect = true;
            let userStr = userAns !== null ? q.options[userAns] : "VIDE";
            details += `Q${i+1}: ${isCorrect?'OK':'NON'} | Rep: ${userStr}\n`;
        }
        
        if (isCorrect) score++;
    });

    // UI RESULTATS
    document.getElementById('app-header').style.display = 'none';
    document.getElementById('app-content').style.display = 'none';
    document.getElementById('app-footer').style.display = 'none';
    document.getElementById('cheat-overlay').style.display = 'none';
    if(document.fullscreenElement) document.exitFullscreen();
    document.getElementById('result-screen').style.display = 'block';

    let passed = score >= PASS_SCORE;
    
    document.getElementById('final-decision').innerHTML = passed ? 
        "<span style='color:var(--success)'>ADMIS</span>" : 
        "<span style='color:var(--danger)'>√âCHEC</span>";
    document.getElementById('final-score').textContent = `${score}/100`;
    
    document.getElementById('res-name').textContent = document.getElementById('name').value;
    document.getElementById('res-school').textContent = document.getElementById('school').value;
    document.getElementById('res-major').textContent = document.getElementById('major').value;
    document.getElementById('res-cheats').textContent = cheatCount;

    // ENVOI MAIL
    try {
        await fetch("https://formspree.io/f/xkogdnag", { // <--- METTEZ VOTRE ID ICI
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                Sujet: `Resultat ${document.getElementById('name').value} : ${score}/100`,
                Candidat: document.getElementById('name').value,
                Score: score,
                Triche: cheatCount,
                Details: details
            })
        });
        document.getElementById('mail-status').textContent = "Rapport envoy√© avec succ√®s.";
        document.getElementById('mail-status').style.color = "var(--success)";
    } catch(e) {
        document.getElementById('mail-status').textContent = "Erreur d'envoi. Sauvegardez le PDF.";
    }

    // CORRECTION
    let corrArea = document.getElementById('correction-area');
    quizQuestions.forEach((q, i) => {
        let isCorrect = false;
        if(q.type==='multi') {
             let u = userAnswers[i]||[];
             if(u.length===q.a.length && [...u].sort().toString()===[...q.a].sort().toString()) isCorrect=true;
        } else {
             if(userAnswers[i]===q.a) isCorrect=true;
        }

        let userText = "Aucune";
        if(userAnswers[i] !== null) {
            if(q.type === 'multi') userText = userAnswers[i].map(idx => q.options[idx]).join(", ");
            else userText = q.options[userAnswers[i]];
        }

        let correctText = "";
        if(q.type === 'multi') correctText = q.a.map(idx => q.options[idx]).join(", ");
        else correctText = q.options[q.a];

        corrArea.innerHTML += `
        <div class="correction-item" style="border-left: 5px solid ${isCorrect?'#28a745':'#dc3545'};">
            <div style="font-weight:bold; margin-bottom:5px;">Question ${i+1} ${isCorrect?'‚úÖ':'‚ùå'}</div>
            <div style="margin-bottom:10px;">${q.q}</div>
            <div style="font-size:0.9rem; color:#555;">
                Votre r√©ponse : <b>${userText}</b><br>
                Bonne r√©ponse : <b style="color:#28a745">${correctText}</b>
            </div>
            <div style="margin-top:5px; font-style:italic; font-size:0.85rem; color:#0056b3;">üí° ${q.e}</div>
        </div>`;
    });
}
</script>
</body>
</html>
